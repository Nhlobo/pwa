<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerBack - Empowering Communities, Supporting Justice</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3a8a;
            --secondary: #f97316;
            --light: #f8f9fa;
            --gray: #6b7280;
            --white: #ffffff;
            --shadow: 0 2px 4px rgba(0,0,0,0.1);
            --radius: 0.5rem;
            --bg: #f6f8fb;
            --card: #ffffff;
            --muted: #6b7280;
            --accent: #0d47a1;
            --danger: #dc2626;
            --success: #059669;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        body {
            background-color: var(--light);
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        header {
            background: var(--white);
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 1.2rem;
        }
        nav ul {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        nav a {
            text-decoration: none;
            color: #333;
            cursor: pointer;
        }
        .btn {
            background: var(--primary);
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            text-decoration: none;
            cursor: pointer;
        }
        .btn.ghost {
            background: transparent;
            color: var(--accent);
            border: 1px solid rgba(13, 71, 161, 0.08);
        }
        main {
            padding: 2rem 0;
        }
        section {
            display: none;
            padding: 2rem 0;
        }
        section.active {
            display: block;
        }
        .hero {
            text-align: center;
        }
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .tagline {
            text-align: center;
            margin-bottom: 2rem;
        }
        .tag {
            background: #e0f2fe;
            color: #0369a1;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            display: inline-block;
            margin-bottom: 1rem;
        }
        .tagline h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        .tagline .description {
            font-size: 1.125rem;
            color: var(--gray);
            margin-bottom: 2rem;
        }
        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        .btn-primary {
            background: var(--secondary);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }
        .btn-secondary {
            background: var(--white);
            color: #333;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            text-decoration: none;
            border: 1px solid #d1d5db;
            cursor: pointer;
        }
        .stakeholder-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        .option {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
        }
        .option h3 {
            margin-bottom: 0.5rem;
        }
        .how-powerback-works h2 {
            text-align: center;
            margin-bottom: 2rem;
        }
        .work-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        .card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        .card-icon {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        .login, .register {
            display: flex;
            justify-content: center;
        }
        .login-form, .register-form {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        .login-form h3, .register-form h3 {
            margin-bottom: 0.5rem;
        }
        .login-form p, .register-form p {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }
        .login-form input, .register-form input, .register-form select {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 1rem;
            border: 1px solid #d1d5db;
            border-radius: var(--radius);
        }
        .about {
            text-align: center;
        }
        .about h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .mission {
            max-width: 800px;
            margin: 0 auto;
            text-align: left;
        }
        .mission h3 {
            margin-bottom: 1rem;
        }
        .values {
            text-align: center;
        }
        .values h2 {
            margin-bottom: 2rem;
        }
        .value-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        .value {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        .value .icon {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        .how-it-works h2 {
            text-align: center;
            margin-bottom: 2rem;
        }
        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        .step {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        .step-number {
            background: var(--primary);
            color: var(--white);
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        .report, .dashboard {
            display: flex;
            justify-content: center;
        }
        .report-form, .dashboard-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 600px;
        }
        .report-form h2, .dashboard-content h2 {
            margin-bottom: 1rem;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
        }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: var(--radius);
        }
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .dashboard-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
        }
        .incident-list {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-top: 2rem;
        }
        .incident-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            padding: 1rem;
            background: var(--primary);
            color: var(--white);
            font-weight: 600;
        }
        .incident-item {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .incident-item:last-child {
            border-bottom: none;
        }
        .logout-message {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }
        .logout-message h2 {
            margin-bottom: 1rem;
        }
        footer {
            background: var(--white);
            text-align: center;
            padding: 2rem;
            border-top: 1px solid #e5e7eb;
        }
        .footer-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        /* SafetyHub-specific styles */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: 0 6px 20px rgba(2, 6, 23, 0.06);
        }
        .brand {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .logo {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
        }
        .brand h1 {
            margin: 0;
            font-size: 18px;
        }
        .muted {
            color: var(--muted);
            font-size: 13px;
        }
        .top-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .badge {
            background: #eef2ff;
            color: var(--accent);
            border-radius: 8px;
            padding: 6px 8px;
            font-size: 13px;
        }
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }
        .tab {
            padding: 6px 10px;
            border-radius: 8px;
            background: #f1f5f9;
            cursor: pointer;
            font-weight: 600;
            color: #0f172a;
        }
        .tab.active {
            background: var(--accent);
            color: white;
        }
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 360px;
            gap: 16px;
        }
        .panel {
            padding: 12px;
            border-radius: 10px;
            background: var(--card);
            border: 1px solid rgba(2, 6, 23, 0.03);
        }
        .section-title {
            font-weight: 700;
            margin: 0 0 8px 0;
        }
        ul.list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        li.item {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            padding: 10px;
            border-radius: 8px;
            background: #fbfdff;
            border: 1px solid #eef2ff;
        }
        .row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .small {
            font-size: 13px;
            color: var(--muted);
        }
        .sos {
            background: var(--danger);
            color: white;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-weight: 800;
        }
        .map {
            height: 220px;
            border-radius: 8px;
            background: linear-gradient(180deg, #e6eefc, #f8fbff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted);
        }
        @media (max-width: 980px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            header.app-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
        }
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div class="brand">
            <div class="logo">PB</div>
            <div>
                <h1>PowerBack</h1>
                <div class="muted">Empowering Communities, Supporting Justice</div>
            </div>
        </div>
        <nav class="top-actions">
            <div id="user-info" class="muted">Not signed in</div>
            <button id="btn-logout" class="btn ghost hidden" onclick="logout()">Logout</button>
            <button id="btn-profile" class="btn ghost hidden" onclick="openProfile()">Profile</button>
        </nav>
    </header>

    <main class="container">
        <!-- Home Section -->
        <section id="home" class="active">
            <div class="hero">
                <p class="tag">Empowering Communities, Supporting Justice</p>
                <h1>Your Voice for Safer Communities</h1>
                <p class="description">
                    PowerBack connects citizens, law enforcement, NGOs, and community watch groups to create a transparent, efficient system for reporting and responding to incidents.
                </p>
                <div class="cta-buttons">
                    <a onclick="showSection('report')" class="btn-primary">Report an incident ‚Üó</a>
                    <a onclick="showSection('login')" class="btn-secondary">Sign In</a>
                </div>
            </div>

            <div class="how-powerback-works">
                <h2>How PowerBack Works</h2>
                <div class="work-cards">
                    <div class="card">
                        <div class="card-icon">‚ö†Ô∏è</div>
                        <h4>Report Incidents</h4>
                        <p>Quickly report crimes and emergencies with photos, videos, and location data.</p>
                    </div>
                    <div class="card">
                        <div class="card-icon">üõ°Ô∏è</div>
                        <h4>Police Response</h4>
                        <p>Law enforcement can view, assign, and track incidents in real-time.</p>
                    </div>
                    <div class="card">
                        <div class="card-icon">üë•</div>
                        <h4>Community Support</h4>
                        <p>NGOs provide victim support and resources with privacy protection.</p>
                    </div>
                    <div class="card">
                        <div class="card-icon">üëÅÔ∏è</div>
                        <h4>Neighborhood Watch</h4>
                        <p>Stay informed about local incidents and build safer communities.</p>
                    </div>
                </div>
            </div>

            <div class="stakeholder-options">
                <h2>Join as a Stakeholder</h2>
                <div class="stakeholder-options">
                    <div class="option">
                        <h3>Citizen</h3>
                        <p>Report incidents and track your submissions</p>
                    </div>
                    <div class="option">
                        <h3>Police</h3>
                        <p>Manage and respond to incidents</p>
                    </div>
                    <div class="option">
                        <h3>NGO</h3>
                        <p>Provide support and resources to victims</p>
                    </div>
                    <div class="option">
                        <h3>Watch</h3>
                        <p>Monitor and share community safety updates</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about">
            <div class="about">
                <h2>About PowerBack</h2>
                <p class="subtitle">A comprehensive platform connecting communities with safety and justice systems</p>
                <div class="mission">
                    <h3>Our Mission</h3>
                    <p>PowerBack was created to bridge the gap between citizens and the institutions designed to protect them. We believe that effective public safety requires transparency, accountability, and seamless communication between all stakeholders.</p>
                    <p>By providing a secure, efficient platform for incident reporting and response, we empower communities to take an active role in their own safety while ensuring law enforcement and support organizations have the tools they need to serve effectively.</p>
                </div>
            </div>

            <div class="values">
                <h2>Our Values</h2>
                <div class="value-grid">
                    <div class="value">
                        <div class="icon">üõ°Ô∏è</div>
                        <h4>Trust & Transparency</h4>
                        <p>Building confidence through clear, accountable incident reporting and response systems.</p>
                    </div>
                    <div class="value">
                        <div class="icon">üéØ</div>
                        <h4>Efficiency</h4>
                        <p>Streamlining communication between citizens, law enforcement, and support organizations.</p>
                    </div>
                    <div class="value">
                        <div class="icon">üë•</div>
                        <h4>Community First</h4>
                        <p>Empowering communities to actively participate in creating safer neighborhoods.</p>
                    </div>
                    <div class="value">
                        <div class="icon">‚ù§Ô∏è</div>
                        <h4>Victim Support</h4>
                        <p>Connecting those in need with resources and assistance through NGO partnerships.</p>
                    </div>
                </div>
            </div>

            <div class="how-it-works">
                <h2>How It Works</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Report</h4>
                        <p>Citizens report incidents with photos, videos, and location data through our secure platform.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Respond</h4>
                        <p>Law enforcement receives real-time alerts and can assign, track, and update incident status.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Support</h4>
                        <p>NGOs provide resources and assistance to victims with appropriate privacy protections.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Inform</h4>
                        <p>Community watch groups keep neighborhoods informed and engaged in local safety efforts.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="login">
            <div class="login">
                <div class="login-form">
                    <h3>Welcome Back</h3>
                    <p>Sign in to your PowerBack account</p>
                    <form>
                        <input type="email" placeholder="your@email.com" required>
                        <input type="password" placeholder="Password" required>
                        <button type="submit" class="btn-primary">Sign In</button>
                    </form>
                    <p>Don't have an account? <a onclick="showSection('register')">Sign up</a></p>
                    <div style="margin-top: 12px; display: flex; gap: 8px; justify-content: center;">
                        <button class="btn ghost" onclick="demoLogin('citizen')">Demo Citizen</button>
                        <button class="btn ghost" onclick="demoLogin('police')">Demo Police</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Register Section -->
        <section id="register">
            <div class="register">
                <div class="register-form">
                    <h3>Create an Account</h3>
                    <p>Join PowerBack as a stakeholder</p>
                    <form>
                        <input type="text" placeholder="Full Name" required>
                        <input type="email" placeholder="your@email.com" required>
                        <input type="password" placeholder="Password" required>
                        <select required>
                            <option value="" disabled selected>Select your role</option>
                            <option value="citizen">Citizen</option>
                            <option value="police">Police</option>
                            <option value="ngo">NGO</option>
                            <option value="watch">Community Watch</option>
                        </select>
                        <div style="margin-top: 6px;">
                            <label><input type="checkbox" required> I accept Terms, Privacy & POPIA consent</label>
                        </div>
                        <button type="submit" class="btn-primary">Register</button>
                    </form>
                    <p>Already have an account? <a onclick="showSection('login')">Sign in</a></p>
                </div>
            </div>
        </section>

        <!-- Report Incident Section -->
        <section id="report">
            <div class="report">
                <div class="report-form">
                    <h2>Report an Incident</h2>
                    <form>
                        <div class="form-group">
                            <label for="title">Incident Title</label>
                            <input type="text" id="title" required>
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="location">Location</label>
                            <input type="text" id="location" required>
                        </div>
                        <div class="form-group">
                            <label for="category">Category</label>
                            <select id="category" required>
                                <option value="" disabled selected>Select category</option>
                                <option value="theft">Theft</option>
                                <option value="violence">Violence</option>
                                <option value="vandalism">Vandalism</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="media">Upload Media (Photos/Videos)</label>
                            <input type="file" id="media" accept="image/*,video/*" multiple>
                        </div>
                        <button type="submit" class="btn-primary">Submit Report</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="hidden">
            <div class="dashboard">
                <div class="dashboard-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h2 id="dash-title">Dashboard</h2>
                        <button onclick="showSection('report')" class="btn-primary">Report New Incident</button>
                    </div>
                    <div class="dashboard-cards">
                        <div class="dashboard-card">
                            <h4>Total Incidents</h4>
                            <p>124</p>
                        </div>
                        <div class="dashboard-card">
                            <h4>Open Cases</h4>
                            <p>34</p>
                        </div>
                        <div class="dashboard-card">
                            <h4>Resolved Cases</h4>
                            <p>90</p>
                        </div>
                        <div class="dashboard-card">
                            <h4>Your Reports</h4>
                            <p>12</p>
                        </div>
                    </div>
                    <!-- CITIZEN VIEW -->
                    <div id="view-citizen" class="panel">
                        <h3 class="section-title">Citizen ‚Äî Home / Safety Feed</h3>
                        <div style="margin-top:8px;">
                            <div class="small">Safety Feed (local incidents & alerts)</div>
                            <ul id="cit-feed" class="list" style="margin-top:8px">
                                <li class="item">
                                    <div>
                                        <strong>Example: Robbery</strong>
                                        <div class="small">Main st ‚Äî 2 mins ago</div>
                                    </div>
                                    <div class="small">Unverified</div>
                                </li>
                            </ul>
                        </div>
                        <div style="margin-top:12px;">
                            <div class="sos" onclick="triggerSOS()">üö® ONE-TAP SOS</div>
                        </div>
                        <div style="margin-top:14px;">
                            <h4 class="small">Full Report Crime Form</h4>
                            <div style="display:grid; gap:8px; margin-top:8px;">
                                <label class="small">Category</label>
                                <select id="cit-category" class="input">
                                    <option>GBV</option>
                                    <option>Rape</option>
                                    <option>Robbery</option>
                                    <option>Hostage</option>
                                    <option>Theft</option>
                                    <option>Assault</option>
                                    <option>Other</option>
                                </select>
                                <label class="small">Description</label>
                                <textarea id="cit-description" class="input" placeholder="Detailed description..."></textarea>
                                <label class="small">Tags (comma separated)</label>
                                <input id="cit-tags" class="input" placeholder="e.g., evening, suspect-white-shirt">
                                <label class="small">Attach media (photo/video/audio)</label>
                                <input id="cit-media" type="file" accept="image/*,video/*,audio/*" class="input">
                                <div class="row">
                                    <button class="btn" onclick="submitCitizenReport()">Submit report</button>
                                    <button class="btn ghost" onclick="saveCitizenDraft()">Save draft</button>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top:14px;">
                            <h4 class="small">Map view</h4>
                            <div class="map" id="cit-map">Map placeholder (auto GPS + manual pin drop)</div>
                        </div>
                        <div style="margin-top:14px;">
                            <h4 class="small">My Reports (history & status)</h4>
                            <ul id="cit-reports" class="list" style="margin-top:8px">
                                <li class="item">
                                    <div>
                                        <strong>Example: Theft</strong>
                                        <div class="small">Park ‚Äî Submitted</div>
                                    </div>
                                    <div class="small">View</div>
                                </li>
                            </ul>
                        </div>
                        <div style="margin-top:14px;">
                            <h4 class="small">Notifications</h4>
                            <ul id="cit-notifications" class="list" style="margin-top:8px">
                                <li class="item">
                                    <div>
                                        <div class="small">Nearby alert: Robbery on Main St</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div style="margin-top:14px;">
                            <h4 class="small">Profile & Verification Status</h4>
                            <div class="small">Verification: <span id="cit-verify-status">Not verified</span></div>
                            <div style="margin-top:8px;">
                                <button class="btn ghost" onclick="openProfile()">Open profile</button>
                            </div>
                        </div>
                    </div>
                    <!-- POLICE VIEW -->
                    <div id="view-police" class="panel hidden">
                        <h3 class="section-title">Police ‚Äî Live Incident Feed & Case Management</h3>
                        <div style="margin-top:8px;">
                            <div class="small">Live Incident Feed</div>
                            <ul id="pol-feed" class="list" style="margin-top:8px">
                                <li class="item">
                                    <div>
                                        <strong>Robbery ‚Äî Main St</strong>
                                        <div class="small">time, severity</div>
                                    </div>
                                    <div class="small">New</div>
                                </li>
                            </ul>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Interactive Map</h4>
                            <div class="map" id="pol-map">Map placeholder (filters by precinct/time/type)</div>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Case Detail Panel</h4>
                            <div class="small">Select a case to see metadata and evidence viewer (placeholder)</div>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Case Management Workflow</h4>
                            <div style="display:flex; gap:8px; margin-top:8px; overflow:auto">
                                <div style="min-width:140px; padding:8px; border-radius:8px; background:#fbfdff">New</div>
                                <div style="min-width:140px; padding:8px; border-radius:8px; background:#fbfdff">Assigned</div>
                                <div style="min-width:140px; padding:8px; border-radius:8px; background:#fbfdff">En Route</div>
                                <div style="min-width:140px; padding:8px; border-radius:8px; background:#fbfdff">On Scene</div>
                                <div style="min-width:140px; padding:8px; border-radius:8px; background:#fbfdff">Investigating</div>
                                <div style="min-width:140px; padding:8px; border-radius:8px; background:#fbfdff">Closed</div>
                            </div>
                        </div>
                    </div>
                    <!-- NGO VIEW -->
                    <div id="view-ngo" class="panel hidden">
                        <h3 class="section-title">NGO ‚Äî Victim Support & Case Management</h3>
                        <div style="margin-top:8px;">
                            <div class="small">Filtered Case Feed (e.g., GBV)</div>
                            <ul id="ngo-feed" class="list" style="margin-top:8px">
                                <li class="item">
                                    <div>
                                        <strong>GBV case</strong>
                                        <div class="small">time & short summary</div>
                                    </div>
                                    <div class="small">Consent: No</div>
                                </li>
                            </ul>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Victim Support Tools</h4>
                            <div class="small">Secure chat placeholder, private notes, helpline dialing, referral list</div>
                            <div style="margin-top:6px;">
                                <button class="btn ghost" onclick="alert('Open secure chat (implement backend / websocket)')">Open secure chat</button>
                            </div>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Consent Management</h4>
                            <div class="small">Show which victims consented to NGO contact</div>
                        </div>
                    </div>
                    <!-- WATCH VIEW -->
                    <div id="view-watch" class="panel hidden">
                        <h3 class="section-title">Neighborhood Watch ‚Äî Local Coordination</h3>
                        <div style="margin-top:8px;">
                            <div class="small">Local Alerts Feed (verified only)</div>
                            <ul id="watch-feed" class="list" style="margin-top:8px">
                                <li class="item">
                                    <div>
                                        <strong>Verified alert</strong>
                                        <div class="small">street ‚Ä¢ time</div>
                                    </div>
                                    <div class="small">Verified</div>
                                </li>
                            </ul>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Patrol Scheduler & Check-in</h4>
                            <div class="small">Schedule placeholder ‚Äî allow volunteers to check in</div>
                        </div>
                        <div style="margin-top:12px;">
                            <h4 class="small">Group Chat & Member Roster</h4>
                            <div class="small">Group chat placeholder & member roles</div>
                        </div>
                    </div>
                </div>
                <!-- RIGHT-SIDE (context / quick actions / map) -->
                <aside>
                    <div class="panel">
                        <div class="small">Search & Filter</div>
                        <div style="margin-top:6px;">
                            <input id="search-q" class="input" placeholder="Search by date, type, location..." oninput="console.log('search: ', this.value)">
                        </div>
                    </div>
                    <div class="panel" style="margin-top:12px;">
                        <div class="small">Nearby / Hotspots</div>
                        <div id="nearby" style="margin-top:8px;">
                            <div class="small">Hotspot heatmap placeholder</div>
                            <div class="map" style="height:120px;">Hotspot Heatmap Placeholder</div>
                        </div>
                    </div>
                    <div class="panel" style="margin-top:12px;">
                        <div class="small">Quick Actions</div>
                        <div style="display:flex; flex-direction:column; gap:8px; margin-top:8px;">
                            <button class="btn" onclick="triggerSOS()">One-tap SOS</button>
                            <button class="btn ghost" onclick="openDrafts()">Open drafts</button>
                            <button class="btn ghost" onclick="openExports()">Export (PDF)</button>
                        </div>
                    </div>
                    <div class="panel" style="margin-top:12px;">
                        <div class="small">Notifications</div>
                        <ul id="global-notifs" class="list" style="margin-top:8px;">
                            <li class="item">
                                <div>
                                    <div class="small">Example notification</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </aside>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="hidden">
            <div class="panel">
                <h3>Profile & Verification</h3>
                <div style="display:grid; gap:8px; margin-top:8px;">
                    <div>
                        <label class="small">Full name</label>
                        <input id="profile-fullname" class="input" type="text">
                    </div>
                    <div>
                        <label class="small">ID / Passport</label>
                        <input id="profile-id" class="input" type="text" placeholder="ID or passport number">
                    </div>
                    <div style="display:flex; gap:8px;">
                        <div style="flex:1;">
                            <label class="small">Phone (OTP)</label>
                            <input id="profile-phone" class="input" type="text" placeholder="+27...">
                        </div>
                        <div style="width:140px;">
                            <label class="small">DOB</label>
                            <input id="profile-dob" class="input" type="date">
                        </div>
                    </div>
                    <div>
                        <label class="small">Address</label>
                        <input id="profile-address" class="input" type="text">
                    </div>
                    <div>
                        <label class="small">Upload Government ID</label>
                        <input id="profile-id-file" class="input" type="file" accept="image/*,application/pdf">
                    </div>
                    <div>
                        <label class="small">Upload Selfie for face-match</label>
                        <input id="profile-selfie-file" class="input" type="file" accept="image/*">
                    </div>
                    <div style="display:flex; gap:8px;">
                        <button class="btn" onclick="saveProfile()">Save Profile</button>
                        <button class="btn ghost" onclick="closeProfile()">Close</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Logout Section -->
        <section id="logout" class="hidden">
            <div style="display: flex; justify-content: center; padding: 3rem 0;">
                <div class="logout-message">
                    <h2>You have been logged out</h2>
                    <p>Thank you for using PowerBack. You can always log back in to report or track incidents.</p>
                    <button onclick="showSection('login')" class="btn-primary">Log In Again</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="container">
        <div class="footer-logo">
            <img src="placeholder.img" alt="PowerBack Logo placeholder" style="width: 24px; height: 24px;">
            <span>PowerBack</span>
        </div>
        <p>Empowering communities through transparent incident reporting</p>
        <p>¬© 2025 PowerBack. All rights reserved.</p>
    </footer>

    <script>
        // Show the specified section and hide others
        function showSection(sectionId) {
            document.querySelectorAll('section').forEach(section => {
                section.classList.remove('active');
                section.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(sectionId).classList.add('active');

            // Update navigation for protected routes
            const nav = document.querySelector('nav ul');
            if (sectionId === 'dashboard' || sectionId === 'report' || sectionId === 'profile') {
                nav.innerHTML = `
                    <li><a onclick="showSection('home')">Home</a></li>
                    <li><a onclick="showSection('dashboard')">Dashboard</a></li>
                    <li><a onclick="showSection('logout')">Logout</a></li>
                `;
            } else {
                nav.innerHTML = `
                    <li><a onclick="showSection('home')">Home</a></li>
                    <li><a onclick="showSection('about')">About</a></li>
                    <li><a onclick="showSection('login')">Login</a></li>
                    <li><a onclick="showSection('register')" class="btn">Get Started</a></li>
                `;
            }
        }

        // Handle form submissions
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Form submitted! This will connect to your backend.');
            });
        });

        // Initialize with home section
        showSection('home');

        // ========== STATE ==========
        let state = {
            user: null,
            token: null,
            draftsKey: "sh_drafts_v1",
            offlineQKey: "sh_offline_v1",
            currentLocation: null
        };

        // ========== AUTH UI ==========
        function showAuth(mode) {
            showSection(mode);
        }

        // ========== DEMO LOGIN (work offline for front-end dev) ==========
        function demoLogin(role) {
            const user = { id: "demo-"+role, name: "Demo "+role.charAt(0).toUpperCase()+role.slice(1), role, verified: false };
            state.user = user;
            state.token = "demo-"+Date.now();
            localStorage.setItem("sh_demo_user", JSON.stringify(user));
            showDashboardFor(role);
        }

        // ========== LOGIN / SIGNUP (placeholders) ==========
        async function handleLogin() {
            const email = document.querySelector("#login-panel input[type='email']").value.trim();
            const password = document.querySelector("#login-panel input[type='password']").value;
            if (!email || !password) return alert("Enter email & password");
            alert("Login placeholder ‚Äî implement backend call.");
            demoLogin("citizen");
        }

        async function handleSignup() {
            const name = document.querySelector("#signup-panel input[type='text']").value.trim();
            const email = document.querySelector("#signup-panel input[type='email']").value.trim();
            const pass = document.querySelector("#signup-panel input[type='password']").value;
            const role = document.querySelector("#signup-panel select").value;
            const consent = document.querySelector("#signup-panel input[type='checkbox']").checked;
            if (!name || !email || !pass) return alert("Complete signup fields");
            if (!consent) return alert("You must accept terms & privacy (POPIA)");
            alert("Signup placeholder ‚Äî implement backend call.");
            demoLogin(role);
        }

        function logout() {
            state.user = null;
            state.token = null;
            localStorage.removeItem("sh_demo_user");
            showSection('home');
            alert("Logged out (frontend only).");
        }

        // ========== DASHBOARD ROUTING ==========
        function showDashboardFor(role) {
            showSection('dashboard');
            document.getElementById("dash-title").textContent = role.charAt(0).toUpperCase() + role.slice(1) + " Dashboard";
            document.querySelector("#user-info").textContent = state.user ? (state.user.name + " ‚Ä¢ " + role) : ("Demo ‚Ä¢ " + role);
            document.querySelector("#btn-logout").classList.remove("hidden");
            document.querySelector("#btn-profile").classList.remove("hidden");
            ["view-citizen", "view-police", "view-ngo", "view-watch"].forEach(id => document.getElementById(id).classList.add("hidden"));
            document.getElementById("view-" + role).classList.remove("hidden");
            hide(document.querySelector("#profile"));
            seedRoleData(role);
        }

        // ========== SEED / PLACEHOLDER DATA ==========
        function seedRoleData(role) {
            if (role === "citizen") {
                document.querySelector("#cit-feed").innerHTML = `
                    <li class="item">
                        <div>
                            <strong>Robbery</strong>
                            <div class="small">Main St ‚Ä¢ 5m ago</div>
                        </div>
                        <div class="small">Unverified</div>
                    </li>
                `;
            }
        }

        // ========== PROFILE PANEL ==========
        function openProfile() {
            showSection('profile');
            const demo = JSON.parse(localStorage.getItem("sh_demo_user") || "null");
            if (demo) {
                document.querySelector("#profile-fullname").value = demo.name || "";
            }
        }

        function closeProfile() {
            showSection('dashboard');
        }

        function saveProfile() {
            alert("Save profile placeholder (implement POST/PUT to backend).");
            closeProfile();
        }

        // ========== CITIZEN ACTIONS ==========
        function submitCitizenReport() {
            const desc = document.querySelector("#cit-description").value.trim();
            if (!desc) return alert("Please add a description.");
            alert("Report saved locally (scaffold). Replace with fetch() to backend when ready.");
        }

        function saveCitizenDraft() {
            alert("Draft saved locally.");
        }

        function openDrafts() {
            alert("Open drafts placeholder.");
        }

        // ========== POLICE ACTIONS ==========
        function triggerSOS() {
            alert("SOS triggered (placeholder).");
        }

        function openExports() {
            alert("Export placeholder ‚Äî implement backend-side PDF generation.");
        }
    </script>
</body>
</html>
